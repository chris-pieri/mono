<lib-overlay [(open)]="isOverlayOpen" (closed)="resetForm()">
  <form [formGroup]="recipeForm" overlay-body>
    <lib-input
      class="w-full"
      label="Recipe Name"
      formControlName="recipeName"
    ></lib-input>

    <div formArrayName="ingredients">
      @for (ingredient of ingredients.controls; track ingredient.get('id'); let
      i = $index) {
      <div [formGroupName]="i" class="flex w-full gap-4 align-bottom">
        <lib-input
          class="flex-grow"
          label="Ingredient"
          formControlName="ingredientName"
        ></lib-input>
        <lib-input
          class="basis-1/5"
          label="Quantity"
          type="number"
          formControlName="ingredientQuantity"
        ></lib-input>
        <lib-select
          class="basis-1/5"
          label="Unit"
          formControlName="ingredientUnit"
          [options]="unitOptions"
        ></lib-select>
        <fieldset class="fieldset self-end">
          <lib-button
            variant="outline"
            color="secondary"
            (clicked)="removeIngredient(i)"
            class="remove-button"
            >x</lib-button
          >
        </fieldset>
      </div>
      }
    </div>
  </form>
  <lib-button
    variant="outline"
    color="secondary"
    (clicked)="addIngredient()"
    class="align-end"
    ><ng-container icon-left><i>+</i></ng-container
    >Add Ingredient</lib-button
  >

  <ng-container overlay-action>
    <lib-button color="primary" (clicked)="submit()"> Save</lib-button>
  </ng-container>
</lib-overlay>

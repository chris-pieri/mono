<lib-overlay [(open)]="isOverlayOpen" (closed)="resetForm()">
  <form [formGroup]="recipeForm" overlay-body>
    <lib-input
      class="w-full"
      label="Recipe Name"
      formControlName="recipeName"
    ></lib-input>

    <div formArrayName="ingredients">
      @for (ingredient of ingredients.controls; track $index; let i = $index) {
      <div [formGroupName]="i" class="flex w-full gap-4">
        <lib-input
          class="flex-grow"
          label="Ingredient"
          formControlName="ingredientName"
        ></lib-input>
        <lib-input
          class="basis-1/5"
          label="Quantity"
          type="number"
          formControlName="ingredientQuantity"
        ></lib-input>
        <lib-select
          class="basis-1/5"
          label="Unit"
          formControlName="ingredientUnit"
          [options]="unitOptions"
        ></lib-select>
      </div>
      }
    </div>

    <lib-button variant="outline" color="secondary" (clicked)="addIngredient()"
      ><ng-container icon-left><i>+</i></ng-container
      >Add Ingredient</lib-button
    >
  </form>

  <ng-container overlay-action>
    <lib-button color="primary"> Save</lib-button>
  </ng-container>
</lib-overlay>

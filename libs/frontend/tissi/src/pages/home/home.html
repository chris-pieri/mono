<lib-overlay [open]="showDeleteOverlay()" [closeable]="false">
  <h2>Are You Sure?</h2>
  Are you sure you want to delete <b>{{ recipeToDelete()?.name }}</b>
  <ng-container overlay-action>
    <lib-button (clicked)="cancelDelete()" color="secondary" variant="outline">Cancel</lib-button>
    <lib-button (clicked)="deleteRecipe()" color="error">Delete</lib-button>
  </ng-container>
</lib-overlay>
<lib-golden-layout>
  <div main-header class="flex justify-between w-full">
    <lib-button variant="ghost">
      <i icon-left>+</i>
      Recipes
    </lib-button>

    <lib-button variant="outline" (clicked)="openOverlay()">
      <i icon-left>+</i>
      Add a Recipe
    </lib-button>

    <lib-button (clicked)="signOut()" color="secondary" variant="outline">
      Sign Out
    </lib-button>
  </div>

  <div main-body class="flex flex-wrap gap-4 p-4">
    @if (recipes.isLoading()) {
    <p>Loading Recipes...</p>
    } @else if (recipes.error()) {
    <p>Failed to load Recipes</p>
    } @else{ @for (recipe of recipes.value(); track recipe.recipe_id) {
    <lib-card [title]="recipe.name">
      <img
        card-image
        src="https://www.shutterstock.com/image-photo/fried-salmon-steak-cooked-green-600nw-2489026949.jpg"
        alt="Shoes"
      />
      <ng-container card-actions>
        <lib-button color="secondary" variant="soft" size="sm" (clicked)="viewRecipe(recipe)">View</lib-button>
        @if (recipe.selected) {
        <lib-button
          color="tertiary"
          variant="outline"
          size="sm"
          (clicked)="deselectRecipe(recipe.recipe_id)"
          >Remove from List</lib-button
        >
        } @else {
        <lib-button
          color="primary"
          variant="outline"
          size="sm"
          (clicked)="selectRecipe(recipe.recipe_id)"
          >Add to List</lib-button
        >
        }
        <lib-dropdown class="ml-auto" [items]="cardActions" align="right" [context]="recipe">
        <lib-button variant="ghost" color="tertiary" size="sm">
          <ng-container icon-left>&hellip;</ng-container>
        </lib-button>
        </lib-dropdown>
      </ng-container>
    </lib-card>
    } @empty {
    <p>Add your first recipe</p>
    } }
  </div>

  <div right-sidebar-header>
    <lib-button (clicked)="toggleRightSidebar()">List</lib-button>
  </div>

  <div right-sidebar-body>
    @if (list.isLoading()) {
    <p>Loading list...</p>
    } @else if (list.error()) {
    <p>Failed to load list</p>
    } @else if (list.value().length > 0) {
    <lib-list title="Ingredients">
      @for (listItem of list.value(); track listItem.ingredient_id) {
      <lib-list-item-checkbox
        [title]="listItem.name"
        [selected]="listItem.checked"
        (changed)="toggleListItem(listItem)"
        [description]="listItem.displayUnits"
      />

      }
    </lib-list>
    } @else {
    <p>You have no recipes selected</p>
    }
  </div>

  <ng-container settings-header>
    <lib-theme-switcher />
  </ng-container>
</lib-golden-layout>
